package leetcode.question.two_pointer;

import java.util.Arrays;

/**
 *@Question:  259. 3Sum Smaller
 *@Difculty:  2 [1->Easy, 2->Medium, 3->Hard]
 *@Frequency: 32.68%
 *@Time  Complexity: O(N^2)
 *@Space Complexity: O(1)
 */

/**
 * ### é¢˜ç›®æè¿°
 *
 * **é¢˜ç›®ç¼–å·ï¼š259. 3Sum Smaller**
 *
 * **é—®é¢˜æè¿°ï¼š**
 *
 * ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `target`ï¼Œä½ çš„ä»»åŠ¡æ˜¯è®¡ç®—æ•°ç»„ä¸­æ‰€æœ‰ä¸‰å…ƒç»„çš„å’Œå°äº `target` çš„ç»„åˆæ•°ã€‚ä¸‰å…ƒç»„çš„å®šä¹‰ä¸º `(nums[i], nums[j], nums[k])`ï¼Œå…¶ä¸­ `i < j < k`ã€‚
 *
 * **ç¤ºä¾‹ï¼š**
 *
 * - **è¾“å…¥ï¼š** `nums = [-2, 0, 1, 3]`ï¼Œ`target = 2`
 * - **è¾“å‡ºï¼š** `2`
 * - **è§£é‡Šï¼š** æ•°ç»„ä¸­æ»¡è¶³æ¡ä»¶çš„ä¸‰å…ƒç»„æ˜¯ `(-2, 0, 1)` å’Œ `(-2, 0, 3)`ã€‚
 *
 * ### è§£é¢˜æ€è·¯
 *
 * 1. **æ’åºï¼š**
 *
 *    é¦–å…ˆï¼Œå°†æ•°ç»„ `nums` è¿›è¡Œæ’åºã€‚è¿™æ˜¯ä¸ºäº†æ–¹ä¾¿åç»­ä½¿ç”¨åŒæŒ‡é’ˆæŠ€æœ¯ï¼Œè¿™æ ·å¯ä»¥å‡å°‘æ—¶é—´å¤æ‚åº¦å¹¶ä½¿é—®é¢˜å˜å¾—æ›´å®¹æ˜“å¤„ç†ã€‚
 *
 * 2. **å›ºå®šç¬¬ä¸€ä¸ªå…ƒç´ ï¼š**
 *
 *    å¯¹äºæ’åºåçš„æ•°ç»„ï¼Œå›ºå®šç¬¬ä¸€ä¸ªå…ƒç´  `nums[i]`ï¼Œç„¶åä½¿ç”¨åŒæŒ‡é’ˆæŠ€æœ¯æ¥å¤„ç†å‰©ä½™éƒ¨åˆ†ã€‚å›ºå®šä¸€ä¸ªå…ƒç´ åï¼Œæˆ‘ä»¬çš„é—®é¢˜å°±å˜æˆäº†åœ¨å‰©ä½™çš„æ•°ç»„ä¸­å¯»æ‰¾ä¸¤ä¸ªæ•°ï¼Œä½¿å¾—å®ƒä»¬çš„å’ŒåŠ ä¸Šå›ºå®šçš„å…ƒç´ å°äºç›®æ ‡å€¼ `target`ã€‚
 *
 * 3. **åŒæŒ‡é’ˆæŠ€æœ¯ï¼š**
 *
 *    - **åˆå§‹åŒ–æŒ‡é’ˆï¼š** ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆ `left` å’Œ `right`ï¼Œ`left` ä»å›ºå®šå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹ï¼Œ`right` ä»æ•°ç»„çš„æœ«å°¾å¼€å§‹ã€‚
 *    - **ç§»åŠ¨æŒ‡é’ˆï¼š** è®¡ç®— `nums[left] + nums[right]` çš„å’Œï¼š
 *      - å¦‚æœå’Œå°äº `target`ï¼Œè¿™è¯´æ˜ `left` åˆ° `right` ä¹‹é—´æ‰€æœ‰çš„æ•°ä¸ `left` æŒ‡å‘çš„æ•°çš„å’Œéƒ½å°äº `target`ã€‚å› æ­¤ï¼Œå°†ç¬¦åˆæ¡ä»¶çš„ä¸‰å…ƒç»„çš„æ•°é‡åŠ ä¸Š `right - left`ï¼Œå¹¶å°† `left` å³ç§»ä»¥å°è¯•æ–°çš„ç»„åˆã€‚
 *      - å¦‚æœå’Œå¤§äºæˆ–ç­‰äº `target`ï¼Œåˆ™å°† `right` å·¦ç§»ä»¥å‡å°‘å’Œçš„å€¼ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„å’Œæˆ–è€… `left` å¤§äºæˆ–ç­‰äº `right`ã€‚
 *
 * 4. **ç´¯åŠ ç»“æœï¼š**
 *
 *    å¯¹äºæ¯ä¸€ä¸ªå›ºå®šçš„å…ƒç´ ï¼Œä½¿ç”¨åŒæŒ‡é’ˆè®¡ç®—æ‰€æœ‰å¯èƒ½çš„ä¸¤æ•°ä¹‹å’Œï¼Œå¹¶å°†ç»“æœç´¯åŠ åˆ°æ€»æ•°ä¸­ï¼Œæœ€ç»ˆè¿”å›è¿™ä¸ªæ€»æ•°ã€‚
 *
 * ### æ—¶é—´å¤æ‚åº¦
 *
 * - **æ’åºæ—¶é—´å¤æ‚åº¦ï¼š** `O(N log N)`ï¼Œå…¶ä¸­ `N` æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚
 * - **åŒæŒ‡é’ˆéå†æ—¶é—´å¤æ‚åº¦ï¼š** å¯¹äºæ¯ä¸ªå›ºå®šçš„å…ƒç´ ï¼ŒåŒæŒ‡é’ˆçš„æ“ä½œæ—¶é—´å¤æ‚åº¦ä¸º `O(N)`ã€‚å› ä¸ºæ¯ä¸ªå…ƒç´ æœ€å¤šè¢«è®¿é—® `N` æ¬¡ï¼Œæ‰€ä»¥æ€»ä½“æ—¶é—´å¤æ‚åº¦ä¸º `O(N^2)`ã€‚
 *
 * ç»¼ä¸Šï¼Œç®—æ³•çš„æ€»æ—¶é—´å¤æ‚åº¦ä¸º `O(N^2)`ã€‚
 *
 * ### ç©ºé—´å¤æ‚åº¦
 *
 * - **æ’åºä½¿ç”¨çš„é¢å¤–ç©ºé—´ï¼š** `O(1)`ï¼Œæ’åºæ˜¯å°±åœ°è¿›è¡Œçš„ã€‚
 * - **å…¶ä»–å˜é‡ï¼š** é™¤äº†è¾“å…¥æ•°æ®å’Œè¿”å›å€¼å¤–ï¼Œç®—æ³•åªä½¿ç”¨äº†å¸¸é‡ç©ºé—´æ¥å­˜å‚¨ç´¢å¼•å’ŒæŒ‡é’ˆã€‚å› æ­¤ç©ºé—´å¤æ‚åº¦ä¸º `O(1)`ã€‚
 *
 * ç»¼ä¸Šæ‰€è¿°ï¼Œç®—æ³•çš„ç©ºé—´å¤æ‚åº¦ä¸º `O(1)`ã€‚
 */

public class LeetCode_259_ThreeSumSmaller {

    //leetcode submit region begin(Prohibit modification and deletion)
    class Solution {
        // è®¡ç®—æ•°ç»„ä¸­æ‰€æœ‰ä¸‰å…ƒç»„çš„å’Œå°äº target çš„ç»„åˆæ•°
        public int threeSumSmaller(int[] nums, int target) {
            // å¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œä»¥ä¾¿ä½¿ç”¨åŒæŒ‡é’ˆæŠ€å·§
            Arrays.sort(nums);
            int sum = 0;  // è®°å½•æ»¡è¶³æ¡ä»¶çš„ä¸‰å…ƒç»„çš„æ•°é‡
            // éå†æ¯ä¸ªå…ƒç´ ï¼Œå›ºå®šç¬¬ä¸€ä¸ªå…ƒç´ 
            for (int i = 0; i < nums.length - 2; i++) {
                // è°ƒç”¨ twoSumSmaller æ–¹æ³•ï¼Œè®¡ç®—å‰©ä½™éƒ¨åˆ†çš„æœ‰æ•ˆä¸‰å…ƒç»„æ•°é‡
                sum += twoSumSmaller(nums, i + 1, target - nums[i]);
            }
            return sum;  // è¿”å›ç¬¦åˆæ¡ä»¶çš„ä¸‰å…ƒç»„æ€»æ•°
        }

        // è®¡ç®—æ•°ç»„ä¸­ä» startIndex å¼€å§‹çš„ä¸¤æ•°ä¹‹å’Œå°äº target çš„ç»„åˆæ•°
        private int twoSumSmaller(int[] nums, int startIndex, int target) {
            int sum = 0;  // è®°å½•ç¬¦åˆæ¡ä»¶çš„äºŒå…ƒç»„çš„æ•°é‡
            int left = startIndex;  // å·¦æŒ‡é’ˆåˆå§‹åŒ–ä¸º startIndex
            int right = nums.length - 1;  // å³æŒ‡é’ˆåˆå§‹åŒ–ä¸ºæ•°ç»„æœ«å°¾
            // åŒæŒ‡é’ˆéå†
            while (left < right) {
                // å¦‚æœå½“å‰å·¦æŒ‡é’ˆå’Œå³æŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ ä¹‹å’Œå°äº target
                if (nums[left] + nums[right] < target) {
                    // æ‰€æœ‰ä»å·¦æŒ‡é’ˆåˆ°å³æŒ‡é’ˆçš„å…ƒç´ ä¸å·¦æŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ çš„å’Œéƒ½å°äº target
                    sum += right - left;
                    left++;  // å·¦æŒ‡é’ˆå³ç§»
                } else {
                    right--;  // å³æŒ‡é’ˆå·¦ç§»
                }
            }
            return sum;  // è¿”å›ç¬¦åˆæ¡ä»¶çš„äºŒå…ƒç»„æ•°é‡
        }
    }
//leetcode submit region end(Prohibit modification and deletion)


    public static void main(String[] args) {
        Solution solution = new LeetCode_259_ThreeSumSmaller().new Solution();

        // æµ‹è¯•æ ·ä¾‹ 1
        int[] nums1 = {-2, 0, 1, 3};
        int target1 = 2;
        System.out.println("æµ‹è¯•æ ·ä¾‹ 1ï¼š");
        // è®¡ç®—ç»“æœåº”è¯¥æ˜¯ 2ï¼Œæ»¡è¶³æ¡ä»¶çš„ä¸‰å…ƒç»„ä¸º (-2, 0, 1) å’Œ (-2, 0, 3)
        System.out.println("ä¸‰å…ƒç»„æ•°é‡å°äº " + target1 + " çš„æ•°é‡: " + solution.threeSumSmaller(nums1, target1));

        // æµ‹è¯•æ ·ä¾‹ 2
        int[] nums2 = {1, 2, 3, 4, 5};
        int target2 = 8;
        System.out.println("æµ‹è¯•æ ·ä¾‹ 2ï¼š");
        // è®¡ç®—ç»“æœåº”è¯¥æ˜¯ 7ï¼Œæ»¡è¶³æ¡ä»¶çš„ä¸‰å…ƒç»„åŒ…æ‹¬ (1, 2, 3), (1, 2, 4), (1, 2, 5), (1, 3, 4), (1, 3, 5), (1, 4, 5), (2, 3, 4)
        System.out.println("ä¸‰å…ƒç»„æ•°é‡å°äº " + target2 + " çš„æ•°é‡: " + solution.threeSumSmaller(nums2, target2));
    }
}

/**
Given an array of n integers nums and an integer target, find the number of 
index triplets i, j, k with 0 <= i < j < k < n that satisfy the condition nums[i] + 
nums[j] + nums[k] < target. 
 
 Example 1: 

 
Input: nums = [-2,0,1,3], target = 2
Output: 2
Explanation: Because there are two triplets which sums are less than 2:
[-2,0,1]
[-2,0,3]
 

 Example 2: 

 
Input: nums = [], target = 0
Output: 0
 

 Example 3: 

 
Input: nums = [0], target = 0
Output: 0
 

 
 Constraints: 

 
 n == nums.length 
 0 <= n <= 3500 
 -100 <= nums[i] <= 100 
 -100 <= target <= 100 
 

 Related Topics Array Two Pointers Binary Search Sorting ğŸ‘ 1556 ğŸ‘ 159

*/