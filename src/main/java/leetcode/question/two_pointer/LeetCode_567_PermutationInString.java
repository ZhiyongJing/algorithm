package leetcode.question.two_pointer;

/**
 *@Question:  567. Permutation in String
 *@Difficulty:  2 [1->Easy, 2->Medium, 3->Hard]
 *@Frequency: 70.74%
 *@Time Complexity: O(N), N is length of s2
 *@Space Complexity: O(1)
 */
/**
 * ç¬¬ä¸€éƒ¨åˆ†ï¼šé¢˜ç›®æè¿°
 *
 * ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² s1 å’Œ s2ï¼Œåˆ¤æ–­ s2 æ˜¯å¦åŒ…å« s1 çš„æ’åˆ—ã€‚
 * æ¢å¥è¯è¯´ï¼Œæ£€æŸ¥ s2 ä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ªå­ä¸²ï¼Œå®ƒçš„å­—ç¬¦æ˜¯ s1 å­—ç¬¦çš„æ’åˆ—ç»„åˆã€‚
 *
 * ä¾‹å¦‚ï¼š
 * è¾“å…¥: s1 = "ab", s2 = "eidbaooo"
 * è¾“å‡º: true
 * è§£é‡Š: s2 åŒ…å« s1 çš„æ’åˆ— ("ba")
 *
 * è¾“å…¥: s1 = "ab", s2 = "eidboaoo"
 * è¾“å‡º: false
 *
 * æ³¨æ„ï¼šä¸¤ä¸ªå­—ç¬¦ä¸²çš„å­—ç¬¦æ’åˆ—é¡ºåºä¸é‡è¦ï¼Œä½†æ¯ä¸ªå­—ç¬¦å‡ºç°çš„é¢‘ç‡å’Œç§ç±»éœ€è¦åŒ¹é…ã€‚
 *
 * ç¬¬äºŒéƒ¨åˆ†ï¼šè§£é¢˜æ€è·¯
 *
 * æˆ‘ä»¬å¯ä»¥é€šè¿‡æ»‘åŠ¨çª—å£çš„æŠ€å·§æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚
 *
 * 1. åˆ¤æ–­ s1 çš„é•¿åº¦æ˜¯å¦å¤§äº s2 çš„é•¿åº¦ï¼Œå¦‚æœæ˜¯ï¼Œç›´æ¥è¿”å› falseã€‚å› ä¸º s1 é•¿åº¦æ›´å¤§ï¼Œæ— æ³•åœ¨ s2 ä¸­å½¢æˆæ’åˆ—ã€‚
 *    ä¾‹å¦‚ï¼Œs1 = "abc"ï¼Œs2 = "ab" æ—¶ï¼Œs1 é•¿åº¦å¤§äº s2ï¼Œç›´æ¥è¿”å› falseã€‚
 *
 * 2. åˆ›å»ºä¸¤ä¸ªé•¿åº¦ä¸º 26 çš„æ•´æ•°æ•°ç»„ `s1arr` å’Œ `s2arr`ï¼Œåˆ†åˆ«ç”¨äºè®°å½• s1 å’Œ s2 ä¸­æ¯ä¸ªå­—æ¯çš„å‡ºç°é¢‘ç‡ã€‚
 *    `s1arr` å’Œ `s2arr` éƒ½æ˜¯é•¿åº¦ä¸º 26 çš„æ•°ç»„ï¼Œè¡¨ç¤ºæ¯ä¸ªå­—æ¯å‡ºç°çš„æ¬¡æ•°ï¼Œå­—æ¯ 'a' å¯¹åº”ç´¢å¼• 0ï¼Œ'b' å¯¹åº”ç´¢å¼• 1ï¼Œä¾æ­¤ç±»æ¨ã€‚
 *
 * 3. åˆå§‹åŒ–æ—¶ï¼Œå°† s1 å’Œ s2 ä¸­å‰ `s1.length()` ä¸ªå­—ç¬¦çš„é¢‘ç‡å¡«å……åˆ° `s1arr` å’Œ `s2arr` ä¸­ã€‚
 *    ä¸¾ä¾‹ï¼šs1 = "ab"ï¼Œs2 = "eidbaooo"ã€‚
 *    - `s1arr` ä¼šè®°å½• "ab" ä¸­å­—ç¬¦ 'a' å’Œ 'b' çš„é¢‘ç‡ï¼Œåˆ†åˆ«æ˜¯ 1 å’Œ 1ã€‚
 *    - `s2arr` ä¼šè®°å½• s2 ä¸­å‰ä¸¤ä¸ªå­—ç¬¦ 'e' å’Œ 'i' çš„é¢‘ç‡ï¼Œåˆ†åˆ«æ˜¯ 1 å’Œ 1ã€‚
 *
 * 4. ä½¿ç”¨æ»‘åŠ¨çª—å£éå† s2ï¼Œä»ä¸‹æ ‡ 0 åˆ° `s2.length() - s1.length()`ã€‚æ¯æ¬¡åˆ¤æ–­å½“å‰çª—å£å†…çš„å­—ç¬¦é¢‘ç‡æ˜¯å¦ä¸ s1 çš„é¢‘ç‡æ•°ç»„åŒ¹é…ã€‚
 *    - æ¯”è¾ƒ `s1arr` å’Œ `s2arr` æ˜¯å¦ç›¸åŒï¼Œå¦‚æœç›¸åŒï¼Œè¯´æ˜å½“å‰çª—å£æ˜¯ s1 çš„æ’åˆ—ï¼Œè¿”å› trueã€‚
 *    - å¦‚æœä¸åŒ¹é…ï¼Œæ»‘åŠ¨çª—å£ï¼šç§»é™¤å·¦ä¾§å­—ç¬¦å¹¶åŠ å…¥å³ä¾§æ–°å­—ç¬¦ï¼Œç»§ç»­è¿›è¡Œæ¯”è¾ƒã€‚
 *    ä¾‹å¦‚ï¼š
 *    - s1 = "ab"ï¼Œs2 = "eidbaooo"ã€‚
 *    - ç¬¬ä¸€æ¬¡æ»‘åŠ¨çª—å£åŒ…å«å­—ç¬¦ "ei"ï¼Œ`s2arr` ä¸ `s1arr` ä¸åŒ¹é…ã€‚
 *    - ç¬¬äºŒæ¬¡æ»‘åŠ¨çª—å£åŒ…å«å­—ç¬¦ "id"ï¼Œ`s2arr` ä¸ `s1arr` ä¸åŒ¹é…ã€‚
 *    - ç¬¬ä¸‰æ¬¡æ»‘åŠ¨çª—å£åŒ…å«å­—ç¬¦ "ba"ï¼Œæ­¤æ—¶ `s2arr` ä¸ `s1arr` åŒ¹é…ï¼Œè¿”å› trueã€‚
 *
 * 5. å¦‚æœéå†å®Œæ‰€æœ‰å¯èƒ½çš„å­ä¸²åä»ç„¶æ²¡æœ‰åŒ¹é…ï¼Œåˆ™è¿”å› falseã€‚
 *    ä¾‹å¦‚ï¼šs1 = "ab"ï¼Œs2 = "eidboaoo"ã€‚ç»è¿‡æ»‘åŠ¨åï¼Œs2 ä¸­æ²¡æœ‰åŒ…å« s1 çš„æ’åˆ—ï¼Œè¿”å› falseã€‚
 *
 * ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ—¶é—´å¤æ‚åº¦ä¸ç©ºé—´å¤æ‚åº¦åˆ†æ
 *
 * æ—¶é—´å¤æ‚åº¦ï¼š
 * - å¡«å…… `s1arr` å’Œ `s2arr` çš„æ—¶é—´å¤æ‚åº¦ä¸º O(N)ï¼Œå…¶ä¸­ N æ˜¯ s1 çš„é•¿åº¦ã€‚
 * - æ»‘åŠ¨çª—å£çš„è¿‡ç¨‹ä¸­ï¼Œéå† s2 ä¸­çš„æ¯ä¸ªå­—ç¬¦ï¼Œæ€»å…±éœ€è¦éå† O(M - N + 1) æ¬¡ï¼Œå…¶ä¸­ M æ˜¯ s2 çš„é•¿åº¦ï¼ŒN æ˜¯ s1 çš„é•¿åº¦ã€‚æ¯æ¬¡çª—å£æ»‘åŠ¨æ—¶ï¼Œéƒ½è¦æ¯”è¾ƒä¸¤ä¸ªé¢‘ç‡æ•°ç»„ï¼Œæœ€å¤šéœ€è¦ O(26) çš„æ—¶é—´ã€‚å› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º O(M)ã€‚
 * - æ€»ä½“æ¥è¯´ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(N + M)ï¼Œå…¶ä¸­ N æ˜¯ s1 çš„é•¿åº¦ï¼ŒM æ˜¯ s2 çš„é•¿åº¦ã€‚
 *
 * ç©ºé—´å¤æ‚åº¦ï¼š
 * - æˆ‘ä»¬ä½¿ç”¨äº†ä¸¤ä¸ªé•¿åº¦ä¸º 26 çš„æ•°ç»„æ¥å­˜å‚¨å­—ç¬¦çš„é¢‘ç‡ï¼Œè¿™ä¸¤ä¸ªæ•°ç»„çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦ä¸º O(1)ï¼Œä¸éšè¾“å…¥å­—ç¬¦ä¸²çš„é•¿åº¦å˜åŒ–ã€‚
 */


public class LeetCode_567_PermutationInString {

    //leetcode submit region begin(Prohibit modification and deletion)
    public class Solution {

        // ä¸»å‡½æ•°ï¼šæ£€æŸ¥å­—ç¬¦ä¸² s2 æ˜¯å¦åŒ…å« s1 çš„æ’åˆ—
        public boolean checkInclusion(String s1, String s2) {
            // å¦‚æœ s1 çš„é•¿åº¦å¤§äº s2 çš„é•¿åº¦ï¼Œç›´æ¥è¿”å› false
            if (s1.length() > s2.length())
                return false;

            // åˆ›å»ºä¸¤ä¸ªæ•°ç»„ç”¨äºå­˜å‚¨ s1 å’Œ s2 ä¸­å­—ç¬¦çš„é¢‘ç‡
            int[] s1arr = new int[26];  // ç”¨äºè®°å½• s1 ä¸­å„å­—ç¬¦çš„å‡ºç°é¢‘ç‡
            int[] s2arr = new int[26];  // ç”¨äºè®°å½• s2 ä¸­å„å­—ç¬¦çš„å‡ºç°é¢‘ç‡

            // å¡«å…… s1arr å’Œ s2arrï¼Œè®°å½•å„è‡ªå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦çš„å‡ºç°æ¬¡æ•°
            for (int i = 0; i < s1.length(); i++) {
                s1arr[s1.charAt(i) - 'a']++;  // s1 å­—ç¬¦çš„é¢‘ç‡
                s2arr[s2.charAt(i) - 'a']++;  // s2 å­—ç¬¦çš„é¢‘ç‡
            }

            // éå† s2ï¼Œé€æ­¥åˆ¤æ–­æ¯ä¸ªçª—å£æ˜¯å¦æ˜¯ s1 çš„æ’åˆ—
            for (int i = 0; i < s2.length() - s1.length(); i++) {
                // åˆ¤æ–­å½“å‰çª—å£æ˜¯å¦ä¸ s1 çš„å­—ç¬¦é¢‘ç‡åŒ¹é…
                if (matches(s1arr, s2arr))
                    return true;  // å¦‚æœåŒ¹é…ï¼Œåˆ™è¿”å› true

                // æ»‘åŠ¨çª—å£ï¼šç§»é™¤å·¦ä¾§å­—ç¬¦ï¼ŒåŠ å…¥å³ä¾§å­—ç¬¦
                s2arr[s2.charAt(i + s1.length()) - 'a']++;  // åŠ å…¥å³ä¾§å­—ç¬¦
                s2arr[s2.charAt(i) - 'a']--;  // ç§»é™¤å·¦ä¾§å­—ç¬¦
            }

            // æœ€åæ£€æŸ¥å‰©ä½™çª—å£æ˜¯å¦ä¸ s1 çš„å­—ç¬¦é¢‘ç‡åŒ¹é…
            return matches(s1arr, s2arr);  // å¦‚æœåŒ¹é…åˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false
        }

        // è¾…åŠ©å‡½æ•°ï¼šæ¯”è¾ƒä¸¤ä¸ªé¢‘ç‡æ•°ç»„æ˜¯å¦ç›¸åŒ
        public boolean matches(int[] s1arr, int[] s2arr) {
            for (int i = 0; i < 26; i++) {
                // å¦‚æœæœ‰ä»»æ„ä¸€ä¸ªå­—ç¬¦çš„é¢‘ç‡ä¸åŒï¼Œè¿”å› false
                if (s1arr[i] != s2arr[i])
                    return false;
            }
            // å¦‚æœæ‰€æœ‰å­—ç¬¦é¢‘ç‡ç›¸åŒï¼Œè¿”å› true
            return true;
        }
    }
    //leetcode submit region end(Prohibit modification and deletion)

    public static void main(String[] args) {
        Solution solution = new LeetCode_567_PermutationInString().new Solution();

        // æµ‹è¯•æ ·ä¾‹ 1ï¼šs2 åŒ…å« s1 çš„æ’åˆ—
        String s1 = "ab", s2 = "eidbaooo";
        System.out.println(solution.checkInclusion(s1, s2)); // è¾“å‡º true

        // æµ‹è¯•æ ·ä¾‹ 2ï¼šs2 ä¸åŒ…å« s1 çš„æ’åˆ—
        s1 = "ab";
        s2 = "eidboaoo";
        System.out.println(solution.checkInclusion(s1, s2)); // è¾“å‡º false

        // æµ‹è¯•æ ·ä¾‹ 3ï¼šs1 å¤§äº s2
        s1 = "abc";
        s2 = "ab";
        System.out.println(solution.checkInclusion(s1, s2)); // è¾“å‡º false
    }
}

/**
Given two strings s1 and s2, return true if s2 contains a permutation of s1, or 
false otherwise. 

 In other words, return true if one of s1's permutations is the substring of s2.
 

 
 Example 1: 

 
Input: s1 = "ab", s2 = "eidbaooo"
Output: true
Explanation: s2 contains one permutation of s1 ("ba").
 

 Example 2: 

 
Input: s1 = "ab", s2 = "eidboaoo"
Output: false
 

 
 Constraints: 

 
 1 <= s1.length, s2.length <= 10â´ 
 s1 and s2 consist of lowercase English letters. 
 

 Related Topics Hash Table Two Pointers String Sliding Window ğŸ‘ 12053 ğŸ‘ 466

*/